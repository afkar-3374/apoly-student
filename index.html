<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>A Poly Student</title>

<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600;700;800&display=swap" rel="stylesheet">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">

<style>

/* --------------------------------------------------
   COLOR THEME (MATCHES YOUR LOGO)
-------------------------------------------------- */
:root {
  --blue-dark: #0E3A5D;
  --blue-mid:  #2E86C1;
  --orange:    #F2A027;
  --bg: #F4F8FB;
  --text: #0B0E13;
  --card-bg: rgba(255,255,255,0.85);
}

.dark {
  --bg: #0A0F18;
  --text: #E8E8E8;
  --card-bg: rgba(14,25,40,0.75);
}

/* GLOBAL */
body {
  margin: 0;
  background: var(--bg);
  color: var(--text);
  font-family: "Poppins", sans-serif;
  transition: 0.3s ease;
}

* { box-sizing: border-box; }

/* --------------------------------------------------
   NAVBAR
-------------------------------------------------- */
.navbar {
  position: fixed;
  width: 100%;
  top: 0;
  padding: 12px 18px;
  display: flex;
  justify-content: space-between;
  align-items: center;
  background: var(--card-bg);
  backdrop-filter: blur(15px);
  border-bottom: 2px solid var(--orange);
  z-index: 200;
}

.nav-left {
  display: flex;
  align-items: center;
  gap: 10px;
}

.logo {
  height: 55px;
  width: 55px;
  border-radius: 50%;
  object-fit: cover;
  background: white;
  padding: 3px;
}

.brand {
  line-height: 1.1;
}

.brand-main {
  font-size: 22px;
  font-weight: 800;
  color: var(--blue-dark);
}

.brand-sub {
  font-size: 18px;
  color: var(--blue-mid);
}

.nav-icons {
  display: flex;
  align-items: center;
  gap: 14px;
}

.nav-icons i {
  font-size: 22px;
  color: var(--blue-mid);
  cursor: pointer;
  transition: 0.2s;
}
.nav-icons i:hover { color: var(--orange); }

/* --------------------------------------------------
   HERO
-------------------------------------------------- */
.hero {
  padding: 110px 20px 40px;
  text-align: center;
}

.hero-title {
  font-size: 40px;
  font-weight: 900;
  color: var(--blue-dark);
}

#typing {
  border-right: 3px solid var(--orange);
  animation: blink .8s infinite;
}

@keyframes blink { 50% { border-color: transparent; } }

.hero-sub {
  margin-top: 5px;
  opacity: 0.85;
}

/* --------------------------------------------------
   SEMESTERS
-------------------------------------------------- */
.sem-container {
  display: flex;
  flex-wrap: wrap;
  justify-content: center;
  gap: 8px;
  padding: 0 15px;
}

.sem-btn {
  padding: 8px 18px;
  border-radius: 15px;
  background: var(--blue-mid);
  color: white;
  border: none;
  font-size: 14px;
  font-weight: 600;
}
.sem-btn.active {
  background: var(--orange);
  color: black;
}

/* --------------------------------------------------
   SUBJECT CARDS
-------------------------------------------------- */
.subjects {
  padding: 10px 15px 60px;
  display: grid;
  gap: 18px;
  grid-template-columns: repeat(auto-fit,minmax(155px,1fr));
}

.card {
  background: var(--card-bg);
  padding: 15px;
  border-radius: 15px;
  text-align: center;
  border: 2px solid rgba(0,0,0,0.05);
  transition: 0.25s;
}

.card:hover { transform: translateY(-5px); }

.card i {
  font-size: 28px;
  color: var(--blue-mid);
}

.card h3 {
  font-size: 16px;
  margin: 5px 0;
  color: var(--blue-dark);
}

.card button {
  background: var(--orange);
  border: none;
  padding: 7px 12px;
  border-radius: 12px;
  font-size: 13px;
  font-weight: 600;
  cursor: pointer;
}

/* --------------------------------------------------
   POPUPS
-------------------------------------------------- */
.popup {
  position: fixed;
  top: 50%; left: 50%;
  transform: translate(-50%,-50%) scale(0);
  opacity: 0;
  background: var(--card-bg);
  padding: 20px 25px;
  border-radius: 15px;
  border: 2px solid var(--orange);
  backdrop-filter: blur(14px);
  transition: 0.25s ease;
  z-index: 300;
}
.popup.active {
  transform: translate(-50%,-50%) scale(1);
  opacity: 1;
}

/* View files popup */
#filePopup {
  width: 90%;
  max-width: 380px;
}
.file-item {
  background: var(--card-bg);
  border: 1px solid var(--blue-mid);
  padding: 10px;
  border-radius: 8px;
  margin-bottom: 10px;
  display: flex;
  justify-content: space-between;
  align-items: center;
}
.file-item button {
  background: var(--orange);
  padding: 6px 12px;
  border-radius: 8px;
  border: none;
  cursor: pointer;
}

/* --------------------------------------------------
   AI ASSISTANT UI (OFFLINE)
-------------------------------------------------- */
#aiButton {
  position: fixed;
  bottom: 20px;
  right: 20px;
  background: var(--orange);
  color: black;
  padding: 13px;
  border-radius: 50%;
  cursor: pointer;
  font-size: 22px;
  box-shadow: 0 4px 15px rgba(0,0,0,0.3);
  z-index: 999;
  transition: 0.3s;
}
#aiButton:hover { transform: scale(1.12); }

#aiPopup {
  position: fixed;
  bottom: 90px;
  right: 20px;
  width: 300px;
  max-height: 420px;
  background: var(--card-bg);
  border: 2px solid var(--orange);
  border-radius: 15px;
  display: none;
  flex-direction: column;
  overflow: hidden;
  z-index: 999;
  backdrop-filter: blur(12px);
}

#aiHeader {
  padding: 10px;
  background: var(--orange);
  color: black;
  font-weight: 700;
  display: flex;
  justify-content: space-between;
  align-items: center;
}

#aiHeader button {
  background: none;
  border: none;
  font-size: 18px;
  cursor: pointer;
}

#aiMessages {
  padding: 10px;
  height: 280px;
  overflow-y: auto;
}

.msg {
  padding: 10px;
  border-radius: 10px;
  margin: 8px 0;
  width: fit-content;
  max-width: 78%;
  font-size: 14px;
}

.user { background: var(--blue-mid); color: white; margin-left: auto; }
.ai { background: white; border: 1px solid var(--blue-mid); }

#aiInputArea {
  display: flex;
  padding: 8px;
  border-top: 1px solid var(--blue-mid);
}

#aiInput {
  flex: 1;
  border: 1px solid var(--blue-mid);
  padding: 7px 10px;
  border-radius: 10px;
}

#aiSend {
  background: var(--blue-mid);
  color: white;
  padding: 7px 10px;
  border: none;
  border-radius: 10px;
  margin-left: 6px;
  cursor: pointer;
}

/* --------------------------------------------------
   FOOTER
-------------------------------------------------- */
.footer {
  text-align: center;
  padding: 20px;
  background: var(--card-bg);
  border-top: 2px solid var(--orange);
  font-size: 14px;
}
</style>
</head>

<body>

<!-- NAVBAR -->
<div class="navbar">
  <div class="nav-left">
    <img src="logo.png" class="logo">
    <div class="brand">
      <span class="brand-main">A Poly</span>
      <span class="brand-sub">Student</span>
    </div>
  </div>

  <div class="nav-icons">
    <i class="fa-brands fa-youtube" onclick="openLink('https://youtube.com/@a_poly_student')"></i>
    <i class="fa-brands fa-instagram" onclick="openLink('https://www.instagram.com/a_poly_student._/')"></i>
    <i class="fa-solid fa-globe" onclick="openLink('http://afkar.curiosityweekends.org/')"></i>
    <i class="fa-solid fa-moon dark-toggle" onclick="toggleDark()"></i>
  </div>
</div>

<!-- HERO -->
<div class="hero">
  <div class="hero-title"><span id="typing"></span></div>
  <div class="hero-sub">Engineering Notes ‚Ä¢ S1 Materials ‚Ä¢ Polytechnic Study Hub</div>
</div>

<!-- SEM BUTTONS -->
<div class="sem-container">
  <button class="sem-btn active">S1</button>
  <button class="sem-btn" onclick="comingSoon()">S2</button>
  <button class="sem-btn" onclick="comingSoon()">S3</button>
  <button class="sem-btn" onclick="comingSoon()">S4</button>
  <button class="sem-btn" onclick="comingSoon()">S5</button>
  <button class="sem-btn" onclick="comingSoon()">S6</button>
</div>

<!-- SUBJECT CARDS -->
<div class="subjects">

  <div class="card">
    <i class="fas fa-atom"></i>
    <h3>Physics</h3>
    <button onclick="openFileViewer('physics')">View</button>
  </div>

  <div class="card">
    <i class="fas fa-flask"></i>
    <h3>Chemistry</h3>
    <button onclick="openFileViewer('chemistry')">View</button>
  </div>

  <div class="card">
    <i class="fas fa-square-root-alt"></i>
    <h3>Mathematics</h3>
    <button onclick="openFileViewer('maths')">View</button>
  </div>

  <div class="card">
    <i class="fas fa-tools"></i>
    <h3>Workshop</h3>
    <button onclick="openFileViewer('workshop')">View</button>
  </div>

  <div class="card">
    <i class="fas fa-book"></i>
    <h3>English</h3>
    <button onclick="openFileViewer('english')">View</button>
  </div>

  <div class="card">
    <i class="fas fa-vial"></i>
    <h3>Physics Lab</h3>
    <button onclick="openFileViewer('physicslab')">View</button>
  </div>

  <div class="card">
    <i class="fas fa-vials"></i>
    <h3>Chemistry Lab</h3>
    <button onclick="openFileViewer('chemistrylab')">View</button>
  </div>

  <div class="card">
    <i class="fas fa-desktop"></i>
    <h3>IT Lab</h3>
    <button onclick="openFileViewer('itlab')">View</button>
  </div>

</div>

<!-- COMING SOON POPUP -->
<div id="popup" class="popup">
  <h3>Coming Soon ‚öôÔ∏è</h3>
  <p style="opacity:0.8;">Files for this section will be uploaded soon.</p>
  <button onclick="closePopup()">OK</button>
</div>

<!-- FILE VIEWER POPUP -->
<div id="filePopup" class="popup">
  <h3 id="filePopupTitle">Files</h3>
  <div id="fileList" style="max-height:270px; overflow-y:auto;"></div>
  <button onclick="closeFilePopup()">Close</button>
</div>

<!-- AI ASSISTANT -->
<div id="aiButton"><i class="fa-solid fa-robot"></i></div>

<div id="aiPopup">
  <div id="aiHeader">
    <span>AI Notes Assistant (Offline)</span>
    <button id="aiClose">&times;</button>
  </div>

  <div id="aiMessages"></div>

  <div id="aiInputArea">
    <input id="aiInput" type="text" placeholder="Ask doubts, formulas, tips...">
    <button id="aiSend"><i class="fa-solid fa-paper-plane"></i></button>
  </div>
</div>

<!-- FOOTER -->
<div class="footer">
  ¬© 2025 A Poly Student ‚Ä¢ All Rights Reserved
</div>

<!-- JAVASCRIPT -->
<script>

/* Open links */
function openLink(url){ window.open(url, "_blank"); }

/* Dark mode */
function toggleDark(){ document.body.classList.toggle("dark"); }

/* Coming soon */
function comingSoon(){ document.getElementById("popup").classList.add("active"); }
function closePopup(){ document.getElementById("popup").classList.remove("active"); }

/* Typing Effect */
const messages = [
  "A Poly Student",
  "Welcome to Your Study Hub",
  "Get All S1 Notes",
  "Engineering Made Simple",
  "Polytechnic Study Materials",
  "Learn ‚Ä¢ Practice ‚Ä¢ Achieve"
];

let msgIndex = 0;
let charIndex = 0;
let isDeleting = false;

function typeEffect() {
  const el = document.getElementById("typing");
  const text = messages[msgIndex];

  if (!isDeleting) {
    el.innerHTML = text.substring(0, charIndex++);
    if (charIndex > text.length) { isDeleting = true; setTimeout(typeEffect, 1200); return; }
  } else {
    el.innerHTML = text.substring(0, charIndex--);
    if (charIndex < 0) { isDeleting = false; msgIndex = (msgIndex + 1) % messages.length; }
  }

  setTimeout(typeEffect, isDeleting ? 50 : 80);
}
typeEffect();

/* View Files Popup */
function openFileViewer(subject){
  fetch(`files/${subject}/files.json`)
    .then(res => res.json())
    .then(data => {
      document.getElementById("filePopupTitle").innerText =
        subject.charAt(0).toUpperCase() + subject.slice(1);

      const list = document.getElementById("fileList");
      list.innerHTML = "";

      data.files.forEach(file => {
        list.innerHTML += `
          <div class="file-item">
            <span>${file}</span>
            <button onclick="downloadSubjectFile('${subject}','${file}')">Download</button>
          </div>
        `;
      });

      document.getElementById("filePopup").classList.add("active");
    })
    .catch(() => comingSoon());
}

function downloadSubjectFile(subject, file){
  window.location.href = `files/${subject}/${file}`;
}

function closeFilePopup(){
  document.getElementById("filePopup").classList.remove("active");
}

/* ---------- OFFLINE AI ASSISTANT ---------- */

function appendMessage(text, type) {
  const div = document.createElement("div");
  div.className = `msg ${type}`;
  div.innerText = text;
  aiMessages.appendChild(div);
  aiMessages.scrollTop = aiMessages.scrollHeight;
}

/* Simple offline brain */
function offlineBrain(question) {
  const q = question.toLowerCase();

  // Motivation
  if (q.includes("motivation") || q.includes("lazy") || q.includes("tired") || q.includes("sad") || q.includes("demotivated")) {
    return "Small steps daily. Try 25 minutes study + 5 minutes break. Even 1 focused hour today is a big win üî•";
  }

  if (q.includes("study") || q.includes("focus") || q.includes("concentrate") || q.includes("time table")) {
    return "Pick 2 subjects per day. Do 4 cycles of 25 min study + 5 min break. Revise at night what you learned. Keep your phone away during the 25 minutes.";
  }

  if (q.includes("exam") || q.includes("test") || q.includes("marks")) {
    return "For exams: learn definitions + formulas first, then practice previous year questions. Write and learn, don‚Äôt just read. Sleep well before exam day üò¥üìö.";
  }

  // Physics
  if (q.includes("ohm")) {
    return "Ohm‚Äôs Law: V = I √ó R. Voltage is directly proportional to current for a conductor at constant temperature. V in volts, I in ampere, R in ohms.";
  }

  if (q.includes("newton") && q.includes("law")) {
    return "Newton's Laws: 1) Inertia. 2) F = m √ó a. 3) Every action has an equal and opposite reaction.";
  }

  if (q.includes("work") && q.includes("energy")) {
    return "Work = F √ó d √ó cosŒ∏. Energy = capacity to do work. Kinetic energy = ¬Ωmv¬≤, Potential energy = mgh (all in Joules).";
  }

  if (q.includes("motion") || q.includes("kinematics")) {
    return "Equations of motion: 1) v = u + at  2) s = ut + ¬Ωat¬≤  3) v¬≤ = u¬≤ + 2as.";
  }

  // Maths
  if (q.includes("trigo") || q.includes("trigonometry") || q.includes("sin") || q.includes("cos") || q.includes("tan")) {
    return "Important trig: sin0=0, sin30=1/2, sin45=1/‚àö2, sin60=‚àö3/2, sin90=1. cos0=1, cos30=‚àö3/2, cos45=1/‚àö2, cos60=1/2, cos90=0. tanŒ∏ = sinŒ∏/cosŒ∏.";
  }

  if (q.includes("integration") || q.includes("integrate")) {
    return "Basic integrals: ‚à´x dx = x¬≤/2 + C, ‚à´x‚Åø dx = x‚Åø‚Å∫¬π/(n+1) (n‚â†-1), ‚à´1/x dx = ln|x| + C, ‚à´eÀ£ dx = eÀ£ + C.";
  }

  if (q.includes("derivative") || q.includes("differentiation")) {
    return "Basic derivatives: d/dx (x‚Åø) = n x‚Åø‚Åª¬π, d/dx (sin x) = cos x, d/dx (cos x) = -sin x, d/dx (eÀ£) = eÀ£, d/dx (ln x) = 1/x.";
  }

  // Chemistry
  if (q.includes("acid") || q.includes("base") || q.includes("salt")) {
    return "Acids: pH < 7, sour, turn blue litmus red. Bases: pH > 7, bitter, soapy, turn red litmus blue. Acid + Base ‚Üí Salt + Water.";
  }

  if (q.includes("periodic table") || q.includes("periodic")) {
    return "Periodic table is arranged by increasing atomic number. Groups = vertical columns (similar properties). Periods = horizontal rows.";
  }

  if (q.includes("ionic") || q.includes("covalent")) {
    return "Ionic bond: transfer of electrons (metal + non-metal). Covalent bond: sharing of electrons (usually non-metal + non-metal).";
  }

  // Programming / IT
  if (q.includes("programming") || q.includes("coding") || q.includes("c language") || q.includes("python")) {
    return "Focus on basics: variables, conditions, loops, arrays, functions. Practice small programs daily (patterns, sums, simple calculators).";
  }

  // Default
  return "I‚Äôm an offline assistant, so I don‚Äôt know everything üòÖ. Try breaking the topic into small parts, write short notes, and practice questions. You can also request a video on this in your YouTube comments!";
}

function handleAI() {
  const q = aiInput.value.trim();
  if (!q) return;
  appendMessage(q, "user");
  const answer = offlineBrain(q);
  appendMessage(answer, "ai");
  aiInput.value = "";
}

/* AI elements + events */
const aiBtn = document.getElementById("aiButton");
const aiPopup = document.getElementById("aiPopup");
const aiClose = document.getElementById("aiClose");
const aiSend = document.getElementById("aiSend");
const aiMessages = document.getElementById("aiMessages");
const aiInput = document.getElementById("aiInput");

aiBtn.onclick = () => {
  aiPopup.style.display = "flex";
  if (!aiMessages.hasChildNodes()) {
    appendMessage("Hi, I'm your offline notes assistant. Ask me about physics, maths, chemistry, exams or motivation! ‚ú®", "ai");
  }
};

aiClose.onclick = () => aiPopup.style.display = "none";
aiSend.onclick = handleAI;
aiInput.addEventListener("keypress", e => { if (e.key === "Enter") handleAI(); });

</script>

</body>
</html>

