<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>A Poly Student</title>

<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600;700;800&display=swap" rel="stylesheet">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">

<style>

/* --------------------------------------------------
   COLOR THEME (MATCHES YOUR LOGO)
-------------------------------------------------- */
:root {
  --blue-dark: #0E3A5D;
  --blue-mid:  #2E86C1;
  --orange:    #F2A027;
  --bg: #0A0F18;          /* default dark background */
  --text: #E8E8E8;
  --card-bg: rgba(14,25,40,0.9);
}

.light {
  --bg: #F4F8FB;
  --text: #0B0E13;
  --card-bg: rgba(255,255,255,0.9);
}

/* GLOBAL */
body {
  margin: 0;
  background: var(--bg);
  color: var(--text);
  font-family: "Poppins", sans-serif;
  transition: 0.3s ease;
}

* { box-sizing: border-box; }

a { color: inherit; }

/* --------------------------------------------------
   NAVBAR
-------------------------------------------------- */
.navbar {
  position: fixed;
  width: 100%;
  top: 0;
  padding: 12px 18px;
  display: flex;
  justify-content: space-between;
  align-items: center;
  background: var(--card-bg);
  backdrop-filter: blur(15px);
  border-bottom: 2px solid var(--orange);
  z-index: 200;
}

.nav-left {
  display: flex;
  align-items: center;
  gap: 10px;
}

.logo {
  height: 55px;
  width: 55px;
  border-radius: 50%;
  object-fit: cover;
  background: white;
  padding: 3px;
}

.brand {
  line-height: 1.1;
}

.brand-main {
  font-size: 22px;
  font-weight: 800;
  color: var(--blue-mid);
}

.brand-sub {
  font-size: 18px;
  color: var(--orange);
}

.nav-icons {
  display: flex;
  align-items: center;
  gap: 14px;
}

.nav-icons i {
  font-size: 22px;
  color: var(--blue-mid);
  cursor: pointer;
  transition: 0.2s;
}
.nav-icons i:hover { color: var(--orange); }

/* --------------------------------------------------
   HERO
-------------------------------------------------- */
.hero {
  padding: 110px 20px 40px;
  text-align: center;
}

.hero-title {
  font-size: 40px;
  font-weight: 900;
  color: var(--blue-mid);
}

#typing {
  border-right: 3px solid var(--orange);
  animation: blink .8s infinite;
}

@keyframes blink { 50% { border-color: transparent; } }

.hero-sub {
  margin-top: 5px;
  opacity: 0.85;
}

/* --------------------------------------------------
   SEMESTERS
-------------------------------------------------- */
.sem-container {
  display: flex;
  flex-wrap: wrap;
  justify-content: center;
  gap: 8px;
  padding: 0 15px;
}

.sem-btn {
  padding: 8px 18px;
  border-radius: 15px;
  background: var(--blue-mid);
  color: white;
  border: none;
  font-size: 14px;
  font-weight: 600;
}
.sem-btn.active {
  background: var(--orange);
  color: black;
}

/* --------------------------------------------------
   SUBJECT CARDS
-------------------------------------------------- */
.subjects {
  padding: 10px 15px 60px;
  display: grid;
  gap: 18px;
  grid-template-columns: repeat(auto-fit,minmax(155px,1fr));
}

.card {
  background: var(--card-bg);
  padding: 15px;
  border-radius: 15px;
  text-align: center;
  border: 1px solid rgba(255,255,255,0.08);
  transition: 0.25s;
}

.card:hover { transform: translateY(-5px); }

.card i {
  font-size: 28px;
  color: var(--blue-mid);
}

.card h3 {
  font-size: 16px;
  margin: 5px 0;
  color: var(--orange);
}

.card button {
  background: var(--orange);
  border: none;
  padding: 7px 12px;
  border-radius: 12px;
  font-size: 13px;
  font-weight: 600;
  cursor: pointer;
  color: #000;
}

/* --------------------------------------------------
   POPUPS
-------------------------------------------------- */
.popup {
  position: fixed;
  top: 50%; left: 50%;
  transform: translate(-50%,-50%) scale(0);
  opacity: 0;
  background: var(--card-bg);
  padding: 20px 25px;
  border-radius: 15px;
  border: 2px solid var(--orange);
  backdrop-filter: blur(14px);
  transition: 0.25s ease;
  z-index: 300;
}
.popup.active {
  transform: translate(-50%,-50%) scale(1);
  opacity: 1;
}

/* View files popup */
#filePopup {
  width: 90%;
  max-width: 380px;
}
.file-item {
  background: rgba(0,0,0,0.15);
  border: 1px solid var(--blue-mid);
  padding: 10px;
  border-radius: 8px;
  margin-bottom: 10px;
  display: flex;
  justify-content: space-between;
  align-items: center;
}
.file-item button {
  background: var(--orange);
  padding: 6px 12px;
  border-radius: 8px;
  border: none;
  cursor: pointer;
  color: #000;
}

/* --------------------------------------------------
   AI ASSISTANT UI (OFFLINE)
-------------------------------------------------- */
#aiButton {
  position: fixed;
  bottom: 20px;
  right: 20px;
  background: var(--orange);
  color: black;
  padding: 13px;
  border-radius: 50%;
  cursor: pointer;
  font-size: 22px;
  box-shadow: 0 4px 15px rgba(0,0,0,0.35);
  z-index: 999;
  transition: 0.3s;
}
#aiButton:hover { transform: scale(1.12); }

#aiPopup {
  position: fixed;
  bottom: 90px;
  right: 20px;
  width: 300px;
  max-height: 420px;
  background: var(--card-bg);
  border: 2px solid var(--orange);
  border-radius: 15px;
  display: none;
  flex-direction: column;
  overflow: hidden;
  z-index: 999;
  backdrop-filter: blur(12px);
}

#aiHeader {
  padding: 10px;
  background: var(--orange);
  color: black;
  font-weight: 700;
  display: flex;
  justify-content: space-between;
  align-items: center;
}

#aiHeader button {
  background: none;
  border: none;
  font-size: 18px;
  cursor: pointer;
}

#aiMessages {
  padding: 10px;
  height: 280px;
  overflow-y: auto;
}

.msg {
  padding: 10px;
  border-radius: 10px;
  margin: 8px 0;
  width: fit-content;
  max-width: 78%;
  font-size: 14px;
  white-space: pre-line;
}

.user { background: var(--blue-mid); color: white; margin-left: auto; }
.ai { background: rgba(0,0,0,0.15); border: 1px solid var(--blue-mid); }

#aiInputArea {
  display: flex;
  padding: 8px;
  border-top: 1px solid var(--blue-mid);
}

#aiInput {
  flex: 1;
  border: 1px solid var(--blue-mid);
  padding: 7px 10px;
  border-radius: 10px;
  background: transparent;
  color: var(--text);
}

#aiSend {
  background: var(--blue-mid);
  color: white;
  padding: 7px 10px;
  border: none;
  border-radius: 10px;
  margin-left: 6px;
  cursor: pointer;
}

/* --------------------------------------------------
   FOOTER
-------------------------------------------------- */
.footer {
  text-align: center;
  padding: 20px;
  background: var(--card-bg);
  border-top: 2px solid var(--orange);
  font-size: 14px;
  margin-top: 20px;
}
</style>
</head>

<body>

<!-- NAVBAR -->
<div class="navbar">
  <div class="nav-left">
    <img src="logo.png" class="logo">
    <div class="brand">
      <span class="brand-main">A Poly</span>
      <span class="brand-sub">Student</span>
    </div>
  </div>

  <div class="nav-icons">
    <i class="fa-brands fa-youtube" onclick="openLink('https://youtube.com/@a_poly_student')"></i>
    <i class="fa-brands fa-instagram" onclick="openLink('https://www.instagram.com/a_poly_student._/')"></i>
    <i class="fa-solid fa-globe" onclick="openLink('http://afkar.curiosityweekends.org/')"></i>
    <i class="fa-solid fa-circle-half-stroke" onclick="toggleTheme()"></i>
  </div>
</div>

<!-- HERO -->
<div class="hero">
  <div class="hero-title"><span id="typing"></span></div>
  <div class="hero-sub">Engineering Notes ‚Ä¢ S1 Materials ‚Ä¢ Polytechnic Study Hub</div>
</div>

<!-- SEM BUTTONS -->
<div class="sem-container">
  <button class="sem-btn active">S1</button>
  <button class="sem-btn" onclick="comingSoon()">S2</button>
  <button class="sem-btn" onclick="comingSoon()">S3</button>
  <button class="sem-btn" onclick="comingSoon()">S4</button>
  <button class="sem-btn" onclick="comingSoon()">S5</button>
  <button class="sem-btn" onclick="comingSoon()">S6</button>
</div>

<!-- SUBJECT CARDS -->
<div class="subjects">

  <div class="card">
    <i class="fas fa-atom"></i>
    <h3>Physics</h3>
    <button onclick="openFileViewer('physics')">View</button>
  </div>

  <div class="card">
    <i class="fas fa-flask"></i>
    <h3>Chemistry</h3>
    <button onclick="openFileViewer('chemistry')">View</button>
  </div>

  <div class="card">
    <i class="fas fa-square-root-alt"></i>
    <h3>Mathematics</h3>
    <button onclick="openFileViewer('maths')">View</button>
  </div>

  <div class="card">
    <i class="fas fa-tools"></i>
    <h3>Workshop</h3>
    <button onclick="openFileViewer('workshop')">View</button>
  </div>

  <div class="card">
    <i class="fas fa-book"></i>
    <h3>English</h3>
    <button onclick="openFileViewer('english')">View</button>
  </div>

  <div class="card">
    <i class="fas fa-vial"></i>
    <h3>Physics Lab</h3>
    <button onclick="openFileViewer('physicslab')">View</button>
  </div>

  <div class="card">
    <i class="fas fa-vials"></i>
    <h3>Chemistry Lab</h3>
    <button onclick="openFileViewer('chemistrylab')">View</button>
  </div>

  <div class="card">
    <i class="fas fa-desktop"></i>
    <h3>IT Lab</h3>
    <button onclick="openFileViewer('itlab')">View</button>
  </div>

</div>

<!-- COMING SOON POPUP -->
<div id="popup" class="popup">
  <h3>Coming Soon ‚öôÔ∏è</h3>
  <p style="opacity:0.8;">Files for this section will be uploaded soon.</p>
  <button onclick="closePopup()">OK</button>
</div>

<!-- FILE VIEWER POPUP -->
<div id="filePopup" class="popup">
  <h3 id="filePopupTitle">Files</h3>
  <div id="fileList" style="max-height:270px; overflow-y:auto;"></div>
  <button onclick="closeFilePopup()">Close</button>
</div>

<!-- AI ASSISTANT -->
<div id="aiButton"><i class="fa-solid fa-robot"></i></div>

<div id="aiPopup">
  <div id="aiHeader">
    <span>AI Notes Assistant (Offline)</span>
    <button id="aiClose">&times;</button>
  </div>

  <div id="aiMessages"></div>

  <div id="aiInputArea">
    <input id="aiInput" type="text" placeholder="Ask doubts, formulas, tips...">
    <button id="aiSend"><i class="fa-solid fa-paper-plane"></i></button>
  </div>
</div>

<!-- FOOTER -->
<div class="footer">
  ¬© 2025 A Poly Student ‚Ä¢ All Rights Reserved
</div>

<!-- JAVASCRIPT -->
<script>

/* ---------- Theme ---------- */
if (!localStorage.themeMode) {
  // default dark
  document.body.classList.remove('light');
} else if (localStorage.themeMode === 'light') {
  document.body.classList.add('light');
}

function toggleTheme(){
  document.body.classList.toggle('light');
  localStorage.themeMode = document.body.classList.contains('light') ? 'light' : 'dark';
}

/* Open links */
function openLink(url){ window.open(url, "_blank"); }

/* Coming soon */
function comingSoon(){ document.getElementById("popup").classList.add("active"); }
function closePopup(){ document.getElementById("popup").classList.remove("active"); }

/* Typing Effect */
const messages = [
  "A Poly Student",
  "Welcome to Your Study Hub",
  "Get All S1 Notes",
  "Engineering Made Simple",
  "Polytechnic Study Materials",
  "Learn ‚Ä¢ Practice ‚Ä¢ Achieve"
];

let msgIndex = 0;
let charIndex = 0;
let isDeleting = false;

function typeEffect() {
  const el = document.getElementById("typing");
  const text = messages[msgIndex];

  if (!isDeleting) {
    el.innerHTML = text.substring(0, charIndex++);
    if (charIndex > text.length) { isDeleting = true; setTimeout(typeEffect, 1200); return; }
  } else {
    el.innerHTML = text.substring(0, charIndex--);
    if (charIndex < 0) { isDeleting = false; msgIndex = (msgIndex + 1) % messages.length; }
  }

  setTimeout(typeEffect, isDeleting ? 50 : 80);
}
typeEffect();

/* View Files Popup */
function openFileViewer(subject){
  fetch(`files/${subject}/files.json`)
    .then(res => res.json())
    .then(data => {
      document.getElementById("filePopupTitle").innerText =
        subject.charAt(0).toUpperCase() + subject.slice(1);

      const list = document.getElementById("fileList");
      list.innerHTML = "";

      data.files.forEach(file => {
        list.innerHTML += `
          <div class="file-item">
            <span>${file}</span>
            <button onclick="downloadSubjectFile('${subject}','${file}')">Download</button>
          </div>
        `;
      });

      document.getElementById("filePopup").classList.add("active");
    })
    .catch(() => comingSoon());
}

function downloadSubjectFile(subject, file){
  window.location.href = `files/${subject}/${file}`;
}

function closeFilePopup(){
  document.getElementById("filePopup").classList.remove("active");
}

/* ---------- OFFLINE AI ASSISTANT ---------- */

const aiBtn = document.getElementById("aiButton");
const aiPopup = document.getElementById("aiPopup");
const aiClose = document.getElementById("aiClose");
const aiSend = document.getElementById("aiSend");
const aiMessages = document.getElementById("aiMessages");
const aiInput = document.getElementById("aiInput");

aiBtn.onclick = () => {
  aiPopup.style.display = "flex";
  if (!aiMessages.hasChildNodes()) {
    appendMessage("Hi, I'm your offline notes assistant. Ask me about physics, maths, chemistry, exams or motivation! ‚ú®", "ai");
  }
};

aiClose.onclick = () => aiPopup.style.display = "none";

function appendMessage(text, type) {
  const div = document.createElement("div");
  div.className = `msg ${type}`;
  div.innerText = text;
  aiMessages.appendChild(div);
  aiMessages.scrollTop = aiMessages.scrollHeight;
}

/* Improved offline brain */
function offlineBrain(question) {
  const q = question.toLowerCase().trim();

  /* ---------- PRIORITY: derivatives & integrals ---------- */

  // derivatives
  if (q.includes("derivative") || q.includes("differentiate") || q.includes("d/dx")) {

    if (q.includes("sin")) return "d/dx (sin x) = cos x";
    if (q.includes("cos")) return "d/dx (cos x) = -sin x";
    if (q.includes("tan")) return "d/dx (tan x) = sec¬≤x";

    if (q.includes("x^2") || q.includes("x2")) return "d/dx (x¬≤) = 2x";
    if (q.includes("x^3") || q.includes("x3")) return "d/dx (x¬≥) = 3x¬≤";

    return "General rule: d/dx (x‚Åø) = n¬∑x‚Åø‚Åª¬π, d/dx(eÀ£) = eÀ£, d/dx(ln x) = 1/x.";
  }

  // integrals
  if (q.includes("integral") || q.includes("integration") || q.includes("‚à´")) {

    if (q.includes("x^2") || q.includes("x2")) return "‚à´x¬≤ dx = x¬≥/3 + C";
    if (q.includes("x")) return "‚à´x dx = x¬≤/2 + C";
    if (q.includes("1/x")) return "‚à´1/x dx = ln|x| + C";

    return "Basic integrals:\n‚à´x‚Åø dx = x‚Åø‚Å∫¬π/(n+1) + C (n‚â†-1)\n‚à´1/x dx = ln|x| + C\n‚à´eÀ£ dx = eÀ£ + C.";
  }

  /* ---------- TRIGONOMETRY ---------- */
  if (
    q.includes("trigo") ||
    q.includes("trigonometry") ||
    ((q.includes("sin") || q.includes("cos") || q.includes("tan")) && !q.includes("derivative"))
  ) {
    return "Important trig values:\n\n" +
           "sin0=0, sin30=1/2, sin45=1/‚àö2, sin60=‚àö3/2, sin90=1.\n" +
           "cos0=1, cos30=‚àö3/2, cos45=1/‚àö2, cos60=1/2, cos90=0.\n" +
           "tanŒ∏ = sinŒ∏ / cosŒ∏.";
  }

  /* ---------- MOTIVATION ---------- */
  if (q.includes("motivation") || q.includes("lazy") || q.includes("tired") || q.includes("sad") || q.includes("demotivated")) {
    return "You don‚Äôt need to be perfect, just consistent. Study 25 minutes, break 5 minutes. Even 1 focused hour today is a big win üî•";
  }

  /* ---------- STUDY TIPS / EXAMS ---------- */
  if (q.includes("study") || q.includes("focus") || q.includes("concentrate") || q.includes("time table")) {
    return "Simple plan:\n1) Pick 2 subjects per day.\n2) Use 25 min study + 5 min break (Pomodoro) x 4 rounds.\n3) Night: revise what you studied.\n4) Keep phone away during the 25 minutes.";
  }

  if (q.includes("exam") || q.includes("test") || q.includes("marks")) {
    return "Exam tips:\n‚Ä¢ Learn definitions + formulas first.\n‚Ä¢ Practice previous year questions.\n‚Ä¢ Write and learn, don‚Äôt just read.\n‚Ä¢ Sleep well before exam day, avoid last-minute full-night study.";
  }

  /* ---------- PHYSICS ---------- */
  if (q.includes("ohm")) {
    return "Ohm‚Äôs Law: V = I √ó R.\nVoltage (V) is directly proportional to current (I) for a conductor at constant temperature. R is resistance in ohms (Œ©).";
  }

  if (q.includes("newton") && q.includes("law")) {
    return "Newton's Laws:\n1Ô∏è‚É£ First law (Inertia): A body continues in its state of rest or uniform motion unless acted upon by a net external force.\n2Ô∏è‚É£ Second law: F = m¬∑a.\n3Ô∏è‚É£ Third law: For every action, there is an equal and opposite reaction.";
  }

  if (q.includes("motion") || q.includes("kinematics")) {
    return "Equations of motion (constant acceleration):\n1) v = u + at\n2) s = ut + ¬Ωat¬≤\n3) v¬≤ = u¬≤ + 2as\nWhere u = initial velocity, v = final velocity, a = acceleration, s = displacement, t = time.";
  }

  if (q.includes("work") && q.includes("energy")) {
    return "Work = F¬∑d¬∑cosŒ∏ (Joules).\nEnergy = capacity to do work.\nKinetic energy = ¬Ωmv¬≤\nPotential energy = mgh.";
  }

  /* ---------- CHEMISTRY ---------- */
  if (q.includes("acid") || q.includes("base") || q.includes("salt")) {
    return "Acids: sour, pH < 7, turn blue litmus red.\nBases: bitter, slippery, pH > 7, turn red litmus blue.\nAcid + Base ‚Üí Salt + Water (neutralisation).";
  }

  if (q.includes("periodic")) {
    return "Periodic table: elements arranged in increasing atomic number.\nGroups = vertical columns (similar properties).\nPeriods = horizontal rows.";
  }

  if (q.includes("ionic") || q.includes("covalent") || q.includes("bond")) {
    return "Ionic bond: transfer of electrons (metal + non-metal), forms ions.\nCovalent bond: sharing of electrons (usually non-metals).";
  }

  /* ---------- PROGRAMMING / IT ---------- */
  if (q.includes("programming") || q.includes("coding") || q.includes("c language") || q.includes("python")) {
    return "Programming basics:\n1) Learn variables & data types\n2) If/else and loops\n3) Functions\n4) Arrays/strings\nPractice small problems daily instead of just reading theory.";
  }

  /* ---------- DEFAULT ---------- */
  return "I'm your offline assistant ü§ñ.\nI know basic physics, chemistry, maths, programming, motivation and study tips.\nTry asking in simple words like:\n‚Ä¢ ‚ÄúOhm‚Äôs law?‚Äù\n‚Ä¢ ‚Äúderivative of sin x‚Äù\n‚Ä¢ ‚Äútrigo basics‚Äù\n‚Ä¢ ‚Äúexam tips‚Äù\n‚Ä¢ ‚Äúperiodic table explanation‚Äù.";
}

/* Handle AI send */
function handleAI() {
  const q = aiInput.value.trim();
  if (!q) return;
  appendMessage(q, "user");
  const answer = offlineBrain(q);
  appendMessage(answer, "ai");
  aiInput.value = "";
}

aiSend.onclick = handleAI;
aiInput.addEventListener("keypress", e => { if (e.key === "Enter") handleAI(); });

</script>

</body>
</html>
